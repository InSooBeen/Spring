# π― 9μ£Όμ°¨ ν•µμ‹¬ ν‚¤μ›λ“


# Spring Data JPAμ Paging

> ***Paging**
μ‚¬μ©μκ°€ λ°μ΄ν„°λ¥Ό μ”μ²­ν–μ„ λ•, μ „μ²΄ λ°μ΄ν„° μ¤‘ μΌλ¶€λ¥Ό μ›ν•λ” μ •λ ¬ λ°©μ‹μΌλ΅ λ³΄μ—¬μ£Όλ” λ°©μ‹*
>

**β‡’ Spring Data JPAλ” νμ΄μ§•μ„ μ„ν•΄ Pageμ™€ Slice μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•¨.**

**νμ΄μ§• κΈ°λ²• κµ¬ν„μ— ν•„μ”ν• νλΌλ―Έν„°λ“¤**

- page : νμ΄μ§• κΈ°λ²•μ΄ μ μ©λμ—μ„ λ•, μ›ν•λ” νμ΄μ§€
- size : ν•΄λ‹Ή νμ΄μ§€μ— λ‹΄μ„ λ°μ΄ν„°μ κ°μ
- sort : λ°μ΄ν„° μ •λ ¬ κΈ°μ¤€

**β‡’ μ΄ λ°μ΄ν„°λ“¤μ€ Pageableμ΄λΌλ” κ°μ²΄λ΅ Mappingλ¨.**

**Spring Data JPAμ μΏΌλ¦¬ λ©”μ†λ“μ—μ„ μ κ³µν•λ” νμ΄μ§•, λ°μ΄ν„° μ •λ ¬ κΈ°λ¥μ νλΌλ―Έν„°**

- org.springframework.data.domain.Pageable : νμ΄μ§• κΈ°λ¥ ( λ‚΄λ¶€μ μΌλ΅ sort ν¬ν•¨ )
- org.springframework.data.domain.Sort  : λ°μ΄ν„° μ •λ ¬ κΈ°λ¥

## Pageable μΈν„°νμ΄μ¤

> ***Pageable**
νμ΄μ§•μ— ν•„μ”ν• μ •λ³΄λ¥Ό μ €μ¥ν•λ” μΈν„°νμ΄μ¤λ΅, Pageableμ„ κµ¬ν„ν• PageRequest κ°μ²΄λ¥Ό ν†µν•΄ μ‚¬μ©λ¨.*
>

`PageRequest pageRequest = PageRequest.of(page, size);`   **PageRequest μƒμ„±**

- Pageable κ°μ²΄λ¥Ό μ‚¬μ©ν•λ©΄ λ¦¬ν„΄ νƒ€μ…μ€ Page<T>μ„.
- PageRequest μƒμ„±μμ νλΌλ―Έν„°λ” ν„μ¬ νμ΄μ§€, μ΅°νν•  λ°μ΄ν„° μ, μ •λ ¬ μ •λ³΄λ¥Ό νλΌλ―Έν„°λ΅ μ‚¬μ© ν•  μ μμ.

# Page

```java
public interface Page<T> extends Slice<T> {
	/*
	λ©”μ†λ“λ“¤
	*/
}
```

- Page μΈν„°νμ΄μ¤λ” Slice μΈν„°νμ΄μ¤λ¥Ό μƒμ†ν•λ―€λ΅ Slice μΈν„°νμ΄μ¤μ κΈ°λ¥μ„ μ‚¬μ©ν•  μ μμ.
- μ „μ²΄ λ°μ΄ν„°μ κ°μλ¥Ό μ• μ μμΌλ©°, μ΄λ¥Ό μ΄μ©ν• μ΄ νμ΄μ§€μ κ°μμ μ •λ³΄λ„ μ• μ μμ.
- μ΅°νμΏΌλ¦¬ μ΄ν›„ μ „μ²΄ λ°μ΄ν„° κ°μλ¥Ό μ΅°νν•κΈ° μ„ν• μ¶”κ°€μ μΈ μΉ΄μ΄νΈ μΏΌλ¦¬κ°€ μ‹¤ν–‰λ¨.
- getTotalElements() : μ „μ²΄ λ°μ΄ν„°μ κ°μ
- getTotalPages() : μ „μ²΄ νμ΄μ§€ κ°μ
- getContent() : μ‹¤μ  λ°μ΄ν„° λ¦¬μ¤νΈ λ¶λ¬μ¤κΈ°
  *cf. List (μλ°” μ»¬λ ‰μ…): μ¶”κ°€ count μΏΌλ¦¬ μ—†μ΄ κ²°κ³Όλ§ λ°ν™*

**β‡’ νμ΄μ§€ λ„¤λΉ„κ²μ΄μ…, μ „μ²΄ λ°μ΄ν„°μ ν¬κΈ°μ™€ μ΄ νμ΄μ§€μ κ°μκ°€ ν•„μ”ν• μƒν™©μ—μ„ μ‚¬μ©λ¨.**

# Slice

```java
public interface Slice<T> extends Streamable<T> {
	/*
	λ©”μ†λ“λ“¤
	*/
}
```

- λ°μ΄ν„°μ μΌλ¶€λ§ κ°€μ§€κ³  μμΌλ©°, λ‹¤μ νμ΄μ§€κ°€ μ΅΄μ¬ν•λ”μ§€λ¥Ό ν™•μΈν•  μ μμ.
- μ „μ²΄ λ°μ΄ν„°μ κ°μλ¥Ό λ¨λ¥΄λ―€λ΅, μ΄ νμ΄μ§€μ κ°μλ¥Ό μ• μ μ—†μ.
- μ „μ²΄ λ°μ΄ν„° κ°μλ¥Ό μ΅°νν•μ§€ μ•κ³  μ΄μ „ λλ” λ‹¤μ Sliceκ°€ μ΅΄μ¬ν•λ”μ§€λ§ ν™•μΈν•¨.
- hasNext() : λ‹¤μ νμ΄μ§€ μ΅΄μ¬ μ—¬λ¶€ ν™•μΈ.

**β‡’ λ¬΄ν• μ¤ν¬λ΅¤, λ°μ΄ν„°κ°€ λ§μ€ μƒν™©μ—μ„ μμ£Ό μ‚¬μ©λ¨.**

# κ°μ²΄ κ·Έλν”„ νƒμƒ‰

## κ°μ²΄μ™€ κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤μ ν¨λ¬λ‹¤μ„ λ¶μΌμΉ

> ***ν¨λ¬λ‹¤μ„ λ¶μΌμΉ**
κ°μ²΄μ™€ κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤λ” μ§€ν–¥ν•λ” λ©μ μ΄ μ„λ΅ λ‹¤λ¥΄λ―€λ΅ κΈ°λ¥κ³Ό ν‘ν„ λ°©λ²•μ— μ°¨μ΄κ°€ μμ. κ°μ²΄λ¥Ό κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•  λ•, κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤μ— μλ” λ°μ΄ν„°λ¥Ό κ°μ²΄λ΅ κ°€μ Έμ™€ μ΅°μ‘ν•λ” μƒν™©μ—μ„ λ°μƒν•λ” μ¶©λμ„ λ»ν•¨.*
>

### ex1) μƒμ†

- κ°μ²΄ λ¨λΈμ€ μƒμ†μ„ μ§€μ›ν•μ§€λ§, κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤μ—μ„λ” μƒμ†μ„ μ§€μ›ν•μ§€ μ•μ.

### ex2) μ—°κ΄€κ΄€κ³„

- κ°μ²΄ λ¨λΈμ—μ„λ” κ°μ²΄ κ°„μ μ—°κ΄€κ΄€κ³„λ¥Ό μ§μ ‘ μ°Έμ΅°λ΅ ν‘ν„ν•  μ μμ§€λ§, κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤μ—μ„λ” μ™Έλν‚¤λ¥Ό μ΄μ©ν•΄ ν‘ν„ν•΄μ•Ό ν•¨.

### ex3) λΉ„κµ

- κ°μ²΄λ” μ°Έμ΅°μ λ™λ“±μ„±μ„ λΉ„κµν•μ§€λ§, λ°μ΄ν„°λ² μ΄μ¤μ—μ„λ” κΈ°λ³Έν‚¤λ¥Ό μ΄μ©ν•΄ ν–‰μ λ™λ“±μ„±μ„ λΉ„κµν•¨.

***λ”°λΌμ„, ν¨λ¬λ‹¤μ„ λ¶μΌμΉλ΅ μΈν•΄ κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ—μ„λ” κ°μ²΄ κ·Έλν”„ νƒμƒ‰μ„ ν•  μ μ—†μΌλ―€λ΅, JPAλ¥Ό μ΄μ©ν•¨.***

## κ°μ²΄ κ·Έλν”„ νƒμƒ‰

> ***μ •μ**
κ°μ²΄ Aκ°€ μμ„ λ•, Aκ°€ μ°Έμ΅°ν•λ” λ‹¤λ¥Έ κ°μ²΄λ“¤μ„ Aλ¥Ό ν†µν•΄ μ°Έμ΅°ν•λ” κ²ƒ.
μ¦‰, μ°Έμ΅°λ¥Ό μ‚¬μ©ν•μ—¬ μ—°κ΄€κ΄€κ³„λ¥Ό νƒμƒ‰ν•λ” κ²ƒμ„ λ»ν•¨.*
>
- SQLμ„ μ§μ ‘ λ‹¤λ£¨λ©΄ SQLμ— λ”°λΌ κ°μ²΄ κ·Έλν”„λ¥Ό μ–΄λ””κΉμ§€ νƒμƒ‰ν•  μ μλ”μ§€ μ •ν•΄μ§.
  ex) SQLμ΄ Bμ™€ CκΉμ§€λ§ μ΅°νν•λ” SQLμ΄λΌλ©΄ Bλ‚ CκΉμ§€λ§ μ°Έμ΅° κ°€λ¥
- κ°μ²΄ κ·Έλν”„ νƒμƒ‰ λ²”μ„λ¥Ό ν™•μΈν•λ ¤λ©΄, DAOλ¥Ό μ—΄μ–΄ SQLμ„ μ§μ ‘ ν™•μΈν•΄μ•Ό ν•¨.
  β‡’ Aμ™€ κ΄€λ ¨λ λ¨λ“  κ°μ²΄λ¥Ό μ΅°νν•΄μ„ λ©”λ¨λ¦¬μ— μ¬λ ¤λ‘λ” κ²ƒμ€ λΉ„ν„μ‹¤μ μ΄λ―€λ΅, DAOμ— Aλ¥Ό μ΅°νν•λ” μ—¬λ¬ λ©”μ†λ“λ¥Ό λ§λ“¤μ–΄μ•Ό ν•¨.

***β‡’ JPAλ¥Ό μ΄μ©ν•λ©΄ μ—°κ΄€λ κ°μ²΄λ¥Ό μ‚¬μ©ν•λ” μ‹μ μ— μ μ ν• SELECT SQLμ„ μ‹¤ν–‰ν•λ―€λ΅, κ°μ²΄ κ·Έλν”„λ¥Ό μ›ν•λ” λ§νΌ νƒμƒ‰ν•  μ μμ. (μ§€μ—° λ΅λ”©)***

***λν•, JPAλ” μ—°κ΄€λ κ°μ²΄λ¥Ό μ¦‰μ‹ μ΅°νν• μ§€ μ•„λ‹λ©΄ μ‹¤μ  μ‚¬μ©λλ” μ‹μ μ— μ΅°νν• μ§€ μ„¤μ • κ°€λ¥ν•¨.***

## JPA

> ***μ •μ**
Javaμ—μ„ κ°μ²΄λ¥Ό κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤μ™€ λ§¤ν•‘(ORM: Object-Relational Mapping)ν•μ—¬ λ°μ΄ν„°λ¥Ό μ €μ¥ν•κ³  κ΄€λ¦¬ν•  μ μλ„λ΅ ν•λ” ν‘μ¤€ μΈν„°νμ΄μ¤.
ex)Hibernate*
>

### JPAλ¥Ό μ‚¬μ©ν•λ” μ΄μ ?

**<μƒμ‚°μ„± ν–¥μƒ>**

- μ§μ ‘ SQLμ„ μ‘μ„±ν•μ§€ μ•μ•„λ„ λλ©°, CRUDκ°€ κ°„νΈν•΄μ§.
- νΉν μμ • λ¶€λ¶„μ€ Java μ»¬λ ‰μ…μ²λΌ μ‚¬μ©ν•  μ μμ–΄ νΈλ¦¬ν•¨.

```java
jpa.persist(user) // μ €μ¥
User user = jpa.find(userId) // μ΅°ν
user.setName("user") // μμ •
jpa.remove(user) // μ‚­μ 
```

**<μ μ§€λ³΄μ μ©μ΄>**

- SQLλ΅ λ§¤ν•‘ν•λ” λ°©μ‹μ„ μ΄μ©ν•λ©΄, μ—”ν‹°ν‹°μ— ν•„λ“κ°€ μ¶”κ°€ λ° λ³€κ²½λ  λ•λ§λ‹¤ SQL μΏΌλ¦¬λ¬Έμ„ μμ •ν•΄μ•Όν•¨.
- JPAλ¥Ό μ΄μ©ν•λ©΄, ν•„λ“ λ³€κ²½μ‚¬ν•­μ΄ μμ„ λ• κ°λ°μλ” μ—”ν‹°ν‹°μ— ν•„λ“λ¥Ό μ¶”κ°€ or μ‚­μ λ§ ν•λ©΄ λκ³ , SQLμ€ JPAκ°€ μ²λ¦¬ν•΄μ¤.

**<κ°μ²΄μ™€ κ΄€κ³„ν• λ°μ΄ν„°λ² μ΄μ¤μ ν¨λ¬λ‹¤μ„ λ¶μΌμΉ ν•΄κ²°>**

**μƒμ†**

- JPAλ” μƒμ†κ΄€κ³„μ— μλ” κ°μ²΄λ¥Ό μ €μ¥ν•  λ• ν•„μ”ν• ν…μ΄λΈ”μ— λ€ν• INSERT λ¬Έμ„ μλ™μΌλ΅ μƒμ„±ν•¨.
- μƒμ†κ΄€κ³„μ— μλ” κ°μ²΄λ¥Ό μ΅°ν μ‹μ—λ„ μ•μ•„μ„ JOIN μΏΌλ¦¬λ¥Ό μƒμ„±ν•΄μ¤.

**μ—°κ΄€κ΄€κ³„, κ°μ²΄ κ·Έλν”„ νƒμƒ‰**

- JPAλ¥Ό μ‚¬μ©ν•λ©΄ μλ°” μ»¬λ ‰μ…μ„ μ‚¬μ©ν•λ“―μ΄ μ—°κ΄€κ΄€κ³„μ— μλ” κ°μ²΄λ¥Ό μ €μ¥ν•  μ μμ.
- νΉμ • κ°μ²΄λ¥Ό ν†µν•΄ μ—°κ΄€κ΄€κ³„λ΅ μ°Έμ΅°ν•κ³  μλ” κ°μ²΄λ¥Ό μ‰½κ² κ°€μ Έμ¬ μ μμ.

**λΉ„κµ**

- JPAλ¥Ό μ‚¬μ©ν•λ©΄ κ°™μ€ μ΅°κ±΄μΌλ΅ λ¶λ¬μ¨ κ°μ²΄μ— λ€ν• == λΉ„κµκ°€ κ°€λ¥ν•¨.
- κ°™μ€ νΈλμ­μ…μ—μ„ μ΅°νν• μ—”ν‹°ν‹°λ” κ°™μ€ μ—”ν‹°ν‹°μ„μ„ λ³΄μ¥ν•΄μ¤.